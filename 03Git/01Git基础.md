Git究竟是怎样的一个系统呢？学习Git时注意不要把各种概念和其他版本控制系统相比拟，否则容易混淆每个操作的实际意义。Git在保存和处理各种信息的时候，虽然操作起来的命令形式非常接近，但是它与其他版本控制系统的做法颇为不同。理解这些差异将有助于你准确使用Git提供的各种工具。

## 直接记录快照而非差异比较

Git和其他版本控制系统主要差别在于，Git只关心文件数据的整体是否发生变化，而大多数其他系统则只关心文件内容的具体差异。这类系统(CVS，Subversion等)每次都记录有哪些文件作了更新，以及都更新了哪些行的内容。

Git并不保存这些前后变化的差异数据，实际上，Git更像是把变化的文件作快照后，记录在一个微型的文件系统中。每次提交更新时，它会纵览一遍所有文件的指纹信息并对文件作一快照，然后保存一个指向这次快照的索引。为了提高性能，若文件没有变化，Git不会再次保存，而只是对上次保存的快照作一链接。

这是 Git 同其他系统的重要区别，它完全颠覆了传统版本控制系统的套路，并对各个环节的实现方式做了新的设计。Git更像是个小型的文件系统，但是它同时还提供了许多以此为基础的超强工具，而不只是一个简单的VCS。在Git的分支管理中可以更加体现这样设计的好处。

## 近乎所有操作都是本地执行

在 Git 中绝大多数操作都只需要访问本地文件和资源，不需要连网。但是如果用CVCS的话，差不多所有的操作都要连接网络。因为 Git 在本地磁盘上就保存着所有当前项目的历史更新，所以处理起来飞快。

举个例子，如果要浏览项目的历史摘要。Git不用跑到外面的服务器上取数据回来，而是直接从本地数据库读取后展示给你看。所以任何时候你都可以马上翻阅，无需等待。如果想要查看当前版本的文件和一个月之前的版本有无差异，Git会取出一个月前的快照和当前文件做一次差异运算，而不用请求远程服务器来做这件事。

用CVCS的话，没有网络或者断开VPN你就不能做任何事。但是用Git的话。就算你在飞机或者火车上，都可以非常愉快的频繁提交更新，等有网络了再上传到版本库中。换作其他版本控制系统，这样做几乎不可能。

## 时刻保持数据完整性

在保存到Git之前，所有的数据都要进行内容的校验和计算，并将此结果作为数据的唯一标识和索引。换句话说，不可能在你修改了文件或目录后，Git一无所知。这项特性作为Git的设计哲学，建在整体架构的最底层。所以如果文件在传输时变得不完整，或者磁盘损坏导致文件数据缺失，Git都能立即察觉。

Git使用sha-1算法计算数据的校验和，通过对文件内容或目录结构计算出一个sha-1哈希值，作为指纹字符串。该字符串为40个十六进制字符。

Git的工作完全依赖于这类指纹字符串，所以你会经常看到这样的哈希值。实际上，所有保存在Git数据库中的东西都是以此为索引的。

## 多数操作仅添加数据

常用的 Git 操作大多仅仅是把数据添加到数据库中。因为任何一种不可逆的操作，比如删除数据，都会使其回退或重现历史版本变得困难重重。在别的VCS中，如果还未提交更新，就可能丢失或者混淆一些修改的内容。但是在Git中，一旦提交快照之后就完全不用担心丢失数据，特别是养成定期推送到其他仓库的习惯后。

这种高可靠性使得我们的开发工作安心不少。尽管做各种试验性的尝试都可以。再怎么也不会弄丢数据。

## 文件的三种状态

！！**非常重要**，对于任何一个文件，在Git内部只有三种状态：**已提交(commit)**、**已修改(modified)**、**已暂存(staged)**。已提交表示文件已经被安全地保存在本地数据库中了。已修改表示修改了某个文件，但是还没有提交保存。已暂存表示把已经修改的文件放在下次提交时要保存的清单中。

![图片](https://git-scm.com/figures/18333fig0106-tn.png)

工作目录、暂存区域、本地仓库

每个项目都有一个Git目录。如果git clone出来的话，就是其中的.git目录。它是Git用来保存元数据和对象数据库的地方。该目录非常重要，每次克隆镜像仓库的时候，实际拷贝的就是这个目录里面的数据。

从项目中取出某个版本的所有文件和目录，用以开始后续工作的叫做**工作目录**，这些文件其实是从Git目录中的压缩对象数据库中提取出来的，接下来就可以在工作目录中对这些文件进行编辑。

所谓的暂存区只不过是个简单的文件，一般都放在Git目录中。有时候它会被称为索引文件。不过标准说法还是暂存区域。

基本的Git工作流程如下：

1. 在工作目录中修改某些文件
2. 对修改后的文件进行快照，然后保存到暂存区
3. 提交更新，将保存在暂存区的文件快照中永久转储到Git目录中

所以，我们可以从文件所处的位置来判断状态：如果是Git目录中保存着特定的版本文件，就属于已提交状态。如果做了修改并已放入暂存区域，就是已暂存状态；如果自上次取出后，做了修改但是还没放到暂存区域就是已修改状态。