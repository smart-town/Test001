## 到底什么是分布式呢？
分布式系统是由一组通过网络进行通信，为了完成共同的任务而协调工作的计算机节点组成的系统。分布式系统的出现是为了用廉价的、普通的机器完成单个计算机无法完成的计算、存储任务。

看它的来源，最初自然是只有一个计算机，即相对应的称之为**集中式**，我们构建一个系统时，会将所有的组成都放在一台机器上，然而随着系统规模的扩大，计算机的性能并不足以支持系统的运行。当然可以买更为强大性能的计算机，但是一方面是资金的问题，另一方面即使性能强大也终究会有瓶颈。所以出现了**分布式**，可以将多台计算机串联起来协调处理统一问题，实质上就是“分片”，即将同一个任务分成多块，再分配给多个节点，各个节点处理完毕之后统一汇总结果。

然而由于将多个计算机串联起来，其之间采用的是网络通信的方式。以前在一台计算机中，一个系统的各个部分通信都是一台计算机中进行的，还是很快速可靠的，但是分开之后，网络的正常与否是一个很大的问题，很有可能正在通信的时候就断了，也有可能通信完全断掉不能通信等。而且对于分布式的各个节点来说，当规模很大的时候，节点数量也很大，单个计算机出现问题的情况可能很少，但是对于数量很大的情况，这个概率明显放大了，即大规模的分布式系统各节点都很可能出现问题，所以这个时候也要开始考虑**容错问题**。


## 一个例子
假设有一个对外提供服务的大型分布式系统，用户连接到系统，做一些操作，产生一些需要存储的数据，那么这个过程是如何进行的呢？

1. 用户发来一个请求，需要系统对其提供服务。该系统对其进行响应。
2. 由于上面谈到的容错，以及为了达到高并发。通常对于一个分布式系统来说，一般 **会有多个节点提供相同的服务**。那么 **如何确定选择哪个节点呢？**这就涉及到了 **负责均衡** 的问题。
3. 当通过负载均衡找到一个节点，该节点提供服务时，根据具体的请求复杂程度，通常会涉及到 **读取数据** 和 **调用其他服务**, 对于前者来说，涉及到了 **分布式缓存** 问题，对于后者来说，两个服务之间必然涉及到通信，而一个很大的系统，必然会有很多很多服务（多个节点提供），这样如果只是单纯通过配置接口进行http或tcp的通信，必然会十分复杂繁琐。因为你总是要写socket等，而且还要确定访问哪个地址，但是这个地址有可能会改变，一旦改变要做的工作将会变得特别多。基于此种问题出现了 **RPC** 和 **协调中心**，即提供服务的节点向协调中心注册自己的地址，使用服务的节点去协调中心拿地址就好了。
4. 另一方面，用户请求产生的一些数据，有一些系统可能会对这个消息很感兴趣。比如个性化、日志、监控等。这个时候涉及到两个概念，即消息的生产者和消费者。而生产者如何将消息送给消费者呢？通常这种情况下，生产者并不关心谁接收这个消息，所以并不需要设置目标地址。这里就不适用rpc了。生产者将生产出来的消息放到某个地方，需要的人自取就好了。这就是 **消息队列**
5. 最后，关于用户数据的存储。